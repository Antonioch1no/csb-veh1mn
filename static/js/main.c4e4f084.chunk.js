(this.webpackJsonpecommerce=this.webpackJsonpecommerce||[]).push([[0],{108:function(e,t,c){},110:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(78),i=c.n(r),s=c(83),o=c(113),l=c(84),d=c(20),j=c(24),u=c(8),b=c(1),h=function(){return Object(b.jsx)("div",{className:"spinner",children:Object(b.jsxs)("div",{class:"lds-ripple",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})})},O=c(7),x=c(54),p=c(55),m=c(86),f=c(112),v=c(30),g=c(114),y=function(){return{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}},C=Object(v.b)({name:"product",initialState:!1,reducers:{setIsLoading:function(e,t){return t.payload}}}),S=C.actions.setIsLoading,k=C.reducer,I=Object(v.b)({name:"cart",initialState:[],reducers:{setCart:function(e,t){return t.payload}}}),w=function(){return function(e){e(S(!0)),g.a.get("https://e-commerce-api.academlo.tech/api/v1/cart",y()).then((function(t){return e(N(t.data.data.cart))})).finally((function(){return e(S(!1))}))}},N=I.actions.setCart,L=I.reducer,B=function(e){var t,c=e.show,a=e.handleClose,r=Object(d.b)();Object(n.useEffect)((function(){r(w())}),[]);var i=Object(d.c)((function(e){return e.cart}));return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(m.a,{show:c,onHide:a,children:[Object(b.jsx)(m.a.Header,{closeButton:!0,children:Object(b.jsx)(m.a.Title,{children:"Cart"})}),Object(b.jsxs)(m.a.Body,{children:[null===(t=i.products)||void 0===t?void 0:t.map((function(e){return Object(b.jsx)("div",{children:e.title},e.id)})),Object(b.jsx)(f.a,{onClick:function(){return r((function(e){e(S(!0)),g.a.post("https://e-commerce-api.academlo.tech/api/v1/purchases",{},y()).then((function(){return e(N([]))})).finally((function(){return e(S(!1))}))}))},children:"Checkout"})]})]})})},E=function(){var e=Object(n.useState)(!1),t=Object(O.a)(e,2),c=t[0],a=t[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p.a,{bg:"light",expand:"lg",children:Object(b.jsxs)(s.a,{children:[Object(b.jsx)(p.a.Brand,{as:j.b,to:"/",children:"Ecommerce"}),Object(b.jsx)(p.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsx)(p.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsxs)(x.a,{className:"me-auto",children:[Object(b.jsx)(x.a.Link,{as:j.b,to:"/login",children:"Login"}),Object(b.jsx)(x.a.Link,{as:j.b,to:"/purchases",children:"Purchases"}),Object(b.jsx)(x.a.Link,{onClick:function(){return a(!0)},children:"Carrito"})]})})]})}),Object(b.jsx)(B,{show:c,handleClose:function(){return a(!1)}})]})},T=c(117),P=c(118),F=c(115),H=c(116),R=Object(v.b)({name:"product",initialState:[],reducers:{setProduct:function(e,t){return t.payload}}}),q=function(){return function(e){e(S(!0)),g.a.get("https://e-commerce-api.academlo.tech/api/v1/products").then((function(t){return e(z(t.data.data.products))})).finally((function(){return e(S(!1))}))}},z=R.actions.setProduct,A=R.reducer,G=function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),i=Object(O.a)(r,2),s=i[0],u=i[1],h=Object(d.b)(),x=Object(d.c)((function(e){return e.product}));return Object(n.useEffect)((function(){h(q()),g.a.get("https://e-commerce-api.academlo.tech/api/v1/products/categories").then((function(e){return a(e.data.data.categories)}))}),[]),console.log(c),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(l.a,{lg:3,children:Object(b.jsx)(T.a,{className:"navCategory",children:null===c||void 0===c?void 0:c.map((function(e){return Object(b.jsx)(T.a.Item,{onClick:function(){return h((t=e.id,function(e){e(S(!0)),g.a.get("https://e-commerce-api.academlo.tech/api/v1/products?category=".concat(t)).then((function(t){return e(z(t.data.data.products))})).finally((function(){return e(S(!1))}))}));var t},children:e.name})}))})}),Object(b.jsxs)(l.a,{lg:9,children:[Object(b.jsx)("div",{children:Object(b.jsxs)(P.a,{className:"mb-3",children:[Object(b.jsx)(F.a.Control,{placeholder:"Recipient's username","aria-label":"Recipient's username","aria-describedby":"basic-addon2",value:s,onChange:function(e){return u(e.target.value)}}),Object(b.jsx)(f.a,{variant:"outline-secondary",onClick:function(){return h(function(e){return function(t){t(S(!0)),g.a.get("https://e-commerce-api.academlo.tech/api/v1/products?query=".concat(e)).then((function(e){return t(z(e.data.data.products))})).finally((function(){return t(S(!1))}))}}(s))},children:"Search"})]})}),Object(b.jsx)(o.a,{xs:1,md:2,lg:3,className:"g-4",children:x.map((function(e){return Object(b.jsx)(j.b,{to:"/product/".concat(e.id),style:{textDecoration:"none"},children:Object(b.jsx)(l.a,{children:Object(b.jsxs)(H.a,{className:"imgHome",children:[Object(b.jsx)(H.a.Img,{variant:"top",src:e.productImgs[0],style:{height:"200px",objectFit:"contain"}}),Object(b.jsxs)(H.a.Body,{children:[Object(b.jsx)(H.a.Title,{children:e.title}),Object(b.jsx)(H.a.Text,{children:"This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer."})]})]})})})}))})]})]})}),Object(b.jsx)("div",{})]})},J=c(2),W=c(85),D=function(){var e=Object(u.n)(),t=Object(W.a)(),c=t.register,n=t.handleSubmit,a=Object(d.b)();return Object(b.jsx)("div",{children:Object(b.jsxs)(F.a,{onSubmit:n((function(t){a(S(!0)),g.a.post("https://e-commerce-api.academlo.tech/api/v1/users/login",t).then((function(t){e("/"),console.log(t),localStorage.setItem("token",t.data.data.token)})).catch((function(e){var t,c;404===(null===(t=e.response)||void 0===t?void 0:t.status)?alert("contrase\xf1a incorrecta"):console.log(null===(c=e.response)||void 0===c?void 0:c.data)})).finally((function(){return a(S(!1))}))})),style:{maxWidth:500,margin:"0 auto"},children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)(F.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(b.jsx)(F.a.Label,{children:"Email address"}),Object(b.jsx)(F.a.Control,Object(J.a)({type:"email",placeholder:"Enter email"},c("email"))),Object(b.jsx)(F.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(b.jsxs)(F.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(b.jsx)(F.a.Label,{children:"Password"}),Object(b.jsx)(F.a.Control,Object(J.a)({type:"password",placeholder:"Password"},c("password")))]}),Object(b.jsx)(f.a,{variant:"primary",type:"submit",children:"Submit"})]})})},M=function(){var e=Object(u.p)().id,t=Object(d.b)(),c=Object(n.useState)(),a=Object(O.a)(c,2),r=a[0],i=a[1];Object(n.useEffect)((function(){t(q())}),[]);var s=Object(d.c)((function(e){return e.product})),h=s.find((function(t){return t.id===Number(e)})),x=s.filter((function(e){return e.category.id===(null===h||void 0===h?void 0:h.category.id)&&e.id!==h.id}));return Object(b.jsxs)("div",{children:[Object(b.jsxs)(o.a,{children:[Object(b.jsx)(l.a,{lg:9,children:Object(b.jsxs)(H.a,{children:[Object(b.jsx)(H.a.Img,{variant:"top",src:null===h||void 0===h?void 0:h.productImgs[0]}),Object(b.jsxs)(H.a.Body,{children:[Object(b.jsxs)(H.a.Title,{children:["Card title",null===h||void 0===h?void 0:h.title]}),Object(b.jsx)("div",{style:{fontSize:"50px",color:"black"},children:Object(b.jsxs)("b",{children:["$ ",null===h||void 0===h?void 0:h.price," "]})}),Object(b.jsx)(H.a.Text,{children:null===h||void 0===h?void 0:h.description})]}),Object(b.jsx)("input",{type:"text",value:r,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)(f.a,{onClick:function(){var e={id:h.id,quantity:r};t(function(e){return function(t){t(S(!0)),g.a.post("https://e-commerce-api.academlo.tech/api/v1/cart",e,y()).then((function(){return t(w())})).finally((function(){return t(S(!1))}))}}(e))},children:"add to Cart"})]})}),Object(b.jsx)(l.a,{children:Object(b.jsx)(T.a,{children:x.map((function(e){return Object(b.jsxs)(T.a.Item,{children:[Object(b.jsx)("img",{src:null===e||void 0===e?void 0:e.productImgs[0],alt:"",className:"img-fluid"}),Object(b.jsx)(j.b,{to:"/product/".concat(e.id),children:e.title})]})}))})})]}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{})]})},$=function(){return localStorage.getItem("token")?Object(b.jsx)(u.b,{}):Object(b.jsx)(u.a,{to:"/login"})},K=Object(v.b)({name:"purchases",initialState:[],reducers:{setPurchases:function(e,t){return t.payload}}}),Q=K.actions.setPurchases,U=K.reducer,V=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.purchases}));return Object(n.useEffect)((function(){e((function(e){e(S(!0)),g.a.get("https://e-commerce-api.academlo.tech/api/v1/purchases",y()).then((function(t){return e(Q(t.data.data.purchases))})).finally((function(){return e(S(!1))}))}))}),[]),Object(b.jsx)("div",{children:t.map((function(e){return Object(b.jsx)("div",{children:e.cart.products.map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/product/".concat(e.id),children:e.title})})}))},e.id)}))})};c(108);function X(){var e=Object(d.c)((function(e){return e.isLoading}));return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("div",{children:Object(b.jsxs)(j.a,{children:[Object(b.jsx)(E,{}),e&&Object(b.jsx)(h,{}),Object(b.jsx)(s.a,{className:"my-5",children:Object(b.jsx)(o.a,{children:Object(b.jsx)(l.a,{children:Object(b.jsxs)(u.e,{children:[Object(b.jsx)(u.c,{path:"/",element:Object(b.jsx)(G,{})}),Object(b.jsx)(u.c,{path:"/product/:id",element:Object(b.jsx)(M,{})}),Object(b.jsx)(u.c,{path:"/login",element:Object(b.jsx)(D,{})}),Object(b.jsx)(u.c,{element:Object(b.jsx)($,{}),children:Object(b.jsx)(u.c,{path:"/purchases",element:Object(b.jsx)(V,{})})})]})})})})]})})})}var Y=Object(v.a)({reducer:{product:A,isLoading:k,purchases:U,cart:L}});c(109);i.a.createRoot(document.getElementById("root")).render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(d.a,{store:Y,children:Object(b.jsx)(X,{})})}))}},[[110,1,2]]]);
//# sourceMappingURL=main.c4e4f084.chunk.js.map